<h1 id="streamName">{{ stream.name }}</h1>
<!-- <a href="#/" class="btn greyGrad" id="btStreams"><img src="img/menu.png" /></a> -->


<div id="debug" style="display:none;">
	<span style="background-color:red;padding:3px;">Socket: {{ socketStatus }} </span>
	<button ng-click="skipCurrent()" ng-disabled="!nowPlaying" class="btn">Skip Everywhere</button>
</div>

<section id="topRow" class="clearfix"  ng-class="{ searching : entry.youtubeResults , empty : !items.length , hasItems : items.length }">
	<div class="clearfix" id="nowPlaying" ng-show="nowPlaying">	
		<!-- <h2 id="onNow">Now playing</h2>		 -->
		<h2 id="onNow">{{nowPlaying.title}}
			<button id="host-skip" ng-click="skipCurrent()" ng-show="isHostPlaying" class="btn">Skip this &raquo;</button></h2>
		<aside class="thumbWrap">
			<player id="megaPlayer" item="hostItem" on-finish="hostFinishedPlaying()" on-error="hostPlaybackError()"></player>
			<span class="thumb" ng-show="!isHostPlaying">
				<!-- <img src="/img/1x1.png" style="background:url({{nowPlaying.image}}) 50% 50% no-repeat;" alt="{{nowPlaying.title}}" class="art" /> -->
				<img src="{{nowPlaying.image}}" alt="{{nowPlaying.title}}" class="art" />
			</span>			
		</aside>
		<article class="infoWrap">
			<p class="desc">{{nowPlaying.description}}</p>
			<ul class="history">
				<li>Played - {{nowPlaying.previousPlays}} time(s)</li>
				<li>Total vote(s) - {{nowPlaying.historicVotes + nowPlaying.totalVotes}} </li>
				<li>Added - {{nowPlaying.created | date:'dd/MM'}}</li>
				<li ng-show="nowPlaying.lastPlayed">Played - {{nowPlaying.lastPlayed | date:'dd/MM'}}</li>
			</ul>
			<p class="votes">Votes: <em>{{nowPlaying.totalVotes}}</em></p>
		</article>
	</div>
	<div id="host" class="clearfix" style="display:none;">
		<button ng-click="startHostPlaying()" ng-disabled="isHostPlaying" class="start-btn">&#9656; Start stream</button>
		<button ng-click="stopHostPlaying()" ng-disabled="!isHostPlaying" class="stop-btn">&#9726; Stop stream</button>
		<button ng-click="enableNotifications()" >Enable webkit notifications</button>
	</div>

	<div class="clearfix nothing" id="nowPlaying" ng-show="!nowPlaying">
		<h3>Nothing currently playing</h3>
		<!-- <button ng-click="startHostPlaying()" ng-disabled="isHostPlaying" ng-show="items.length" class="start-btn btn">&#9656; Start stream</button> -->
		<a ng-click="startHostPlaying()" ng-disabled="isHostPlaying" ng-show="items.length" class="start-btn" ><img src="/img/play.png" alt="" /></a>
		<div ng-show="!items.length">
			<p ng-hide="!items.length" ng-show="!isHostPlaying">Get started by searching for some great music &raquo; </p>
		</div>
	</div>

	<form name="addItemForm" id="addItemForm" class="clearfix">
		<legend>
			<!-- <h2>Find songs on <img src="/img/youtube.png" alt="YouTube" style="display:inline;" /></h2> -->
			<h2>Search for songs</h2>
			<!-- <p>Search YouTube&trade; or copy &amp; paste a URL.</p> -->
		</legend>

		<section id="resultsWrap">
			<input class="txtUrl" type="text" name="url" ng-model="entry.url"  ng-change="lookupItem()" placeholder="e.g. 'Hello Lazarus' or 'Magnus Puto'" onfocus="toggleSearching();" onblur="clearSearching()" />	
				
			<section id="ytResults" ng-show="entry.youtubeResults">
				<ul>
					<li ng-repeat="yt in entry.youtubeResults" ng-class="{ added : yt.added , adding : yt.adding }" class="clearfix">
						<a ng-click="addItem(yt, true)" class="clearfix">
							<img ng-src="{{yt.image}}" alt="{{yt.title}}" class="thumb" />
							<strong class="title">{{ yt.title }}</strong>
							<p ng-show="yt.album">{{yt.album}}</p>
						</a>
						<img ng-src="/img/addToPlaylist.png" alt="Add to playlist" class="addToPlaylist" ng-click="addItem(yt, false)"  />
						<em class="views" ng-show="yt.views > 0 ">{{ yt.views}} <i>views</i></em>
					</li>
				</ul>
				<img src="/img/close.png" alt="Close" class="close" ng-click="closeSearchResults()"/>
			</section>
			<!-- <section id="instructions">
				
				<h2>What next...</h2>
				<ol >
					<li>Search YouTube for amazing (or questionable!) music</li>
					<li>Vote for your favourite songs</li>
					<li>See what's Up Next...</li>
				</ol>
			</section> -->
			<img src="/img/poweredbyyoutube.png" alt="YouTube&trade;" style="float:right; margin:-6px 5px 0 0;" />

		</section>
		
	</form>

</section>

<div id="playlist" class="clearfix">
	<p id="next" class="clearfix">Up next ...</p>
	<section id="queue">
		<article ng-show="!items.length">
			<h3 style="padding: 40px 10px;">Hey, the queue is empty! Add some music by searching in the box above.</h3>
			<!-- <ul id="stream-items">
				<li class="item clearfix"><img src="/img/1x1.png" alt="" /></li>
				<li class="item clearfix"><img src="/img/1x1.png" alt="" /></li>
				<li class="item clearfix"><img src="/img/1x1.png" alt="" /></li>
			</ul> -->
		</article>
		<ul class="clearfix" id="stream-items" ng-show="items.length">
			<li ng-repeat="item in items" class="item clearfix type-{{item.type || 'unknown'}}" id="item-{{item._id}}"  style="background:#000 url({{item.image}}) 50% 50% no-repeat;">
				<!-- <span class="thumb"><img ng-src="{{item.image}}" alt="" /></span> -->
				<span class="info">
					<h4 class="title">{{item.title}}</h4>					
					<span class="extra">
						<ul class="trackInfo">
							<li>Played - {{item.previousPlays}} time(s)</li>
							<li>Total vote(s) - {{item.historicVotes + item.totalVotes}} </li>
							<li>Added - {{item.created | date:'dd/MM'}}</li>
							<li ng-show="item.lastPlayed">Played - {{item.lastPlayed | date:'dd/MM'}}</li>
						</ul>
						<!-- <ul class="icons clearfix">
							<li style="display:none;"><button class="trash">Trash</button></li> 
							<li><button class="flag" ng-click="flagItem(item)" title="Flag this item">Flag</button></li>
						</ul> -->
					</span>
				</span>
				
				<img src="/img/vUp.png"  ng-click="submitVote(item, 1)" ng-class="{ voteActive: item.currentVote == 1}" class="voteUp" title="Vote up!" alt="Vote up!" />

				<span class="votes">{{item.totalVotes || 0}}</span>
			</li>
		</ul>
	</section>

</div>

<script>
	_gaq.push(['_trackPageview',location.pathname + location.search  + location.hash]);
</script>
	


<!-- 
<a href="#" id="showHideFeedback">Feedback</a>
<div id="feedback" class="clearfix">
	<h2>Help improve the Jukebox</h2>
	<p>Some content here</p>			
	<a href="#" class="close"><img src="/img/close.png" alt="Close" class="close" ng-click="closeSearchResults()"/></a>
</div>
 -->